<ion-header>
  <ion-navbar>
    <ion-title>
      Lista de Usuarios
    </ion-title>
  </ion-navbar>
</ion-header>
<ion-content padding>
  <ion-searchbar [showCancelButton]="shouldShowCancel"
                 (ionInput)="onInput($event)"></ion-searchbar>
  <ion-list>
    <ion-item *ngFor="let user of search; let i=index" text-wrap (click)="toggleGroup(i)"
              [ngClass]="{active: isGroupShown(i)}">
      <h2>
        <ion-row>
          <ion-col col-10>
            <span class="item-note" text-uppercase>{{user.role}}</span>:
            {{user.name}} {{user.lastname}}
          </ion-col>
          <ion-col text-right>
            <ion-icon color="success" [name]="isGroupShown(i) ? 'arrow-dropdown' : 'arrow-dropright'"></ion-icon>
          </ion-col>
        </ion-row>
      </h2>

      <div *ngIf="isGroupShown(i)">
        <ion-card color="light">

          <ion-list no-lines>
            <ion-item color="light">{{user.dni}}</ion-item>
            <ion-item color="light">{{user.email}}</ion-item>
            <ion-item color="light">{{user.country}}</ion-item>
            <ion-item color="light">{{user.address}}</ion-item>
            <ion-item color="light">{{user.phone}}</ion-item>
          </ion-list>
          <ion-row>
            <ion-col text-right>
              <button ion-button color="warning" icon-only clear (click)="modifyUser(user)">
                <ion-icon name="create"></ion-icon>
              </button>
              <button ion-button color="danger" icon-only clear (click)="deleteUser(user._id,i)">
                <ion-icon name="trash"></ion-icon>
              </button>
            </ion-col>
          </ion-row>
        </ion-card>
      </div>
    </ion-item>
  </ion-list>

</ion-content>
