<ion-header>
  <ion-navbar>
    <ion-title>
      Lista de Usuarios
    </ion-title>
  </ion-navbar>
</ion-header>
<ion-content padding>
  <ion-searchbar [showCancelButton]="shouldShowCancel"
                 (ionInput)="onInput($event)"
                 (ionCancel)="onCancel($event)"></ion-searchbar>
  <ion-item *ngFor="let user of search; let i=index" text-wrap (click)="toggleGroup(i)" [ngClass]="{active: isGroupShown(i)}"> 

    <h2> 
        <ion-row> 
          <ion-col col-10> 
            <span class="item-note" text-uppercase>{{user.role}}</span>: 
            {{user.name}} {{user.lastname}} 
          </ion-col> 
          <ion-col text-right> 
            <ion-icon color="success" [name]="isGroupShown(i) ? 'arrow-dropdown' : 'arrow-dropright'"></ion-icon> 
          </ion-col> 
        </ion-row> 
      </h2> 
      <div *ngIf="isGroupShown(i)"> 
        <ion-card>
        <ion-list no-lines> 
            <ion-item>{{user.dni}}</ion-item> 
            <ion-item>{{user.email}}</ion-item> 
            <ion-item>{{user.country}}</ion-item> 
            <ion-item>{{user.address}}</ion-item> 
            <ion-item>{{user.phone}}</ion-item> 
          </ion-list> 
          <ion-row> 
            <ion-col text-right> 
              <button ion-button clear icon-only color="warning" (click)="modifyUser(user)">
                <ion-icon name="create"></ion-icon>
              </button>
              <button ion-button clear icon-only color="primary" *ngIf="user.role == 'user'" (click)="changeRole(user._id,'inactivo')">
                <ion-icon name="alert"></ion-icon>
              </button>
               <button ion-button clear icon-only color="danger" *ngIf="user.role == 'inactivo'" (click)="changeRole(user._id,'user')">
                <ion-icon name="aperture"></ion-icon>
              </button>
            </ion-col> 
          </ion-row> 
        </ion-card> 
      </div>  

  </ion-item>


</ion-content>
